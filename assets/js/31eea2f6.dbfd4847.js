"use strict";(self.webpackChunkswartzdb_docs=self.webpackChunkswartzdb_docs||[]).push([[800],{7891:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"db-control/restore","title":"Restore Database","description":"SwartzDB provides a restore function that allows you to recover a previously backed-up database. This is essential in cases where the main database gets corrupted, accidentally deleted, or modified incorrectly.","source":"@site/docs/db-control/restore.md","sourceDirName":"db-control","slug":"/db-control/restore","permalink":"/docs/db-control/restore","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Check Database Integrity","permalink":"/docs/db-control/integrity"},"next":{"title":"Delete Database","permalink":"/docs/db-control/delete"}}');var t=r(4848),o=r(8453);const i={sidebar_position:4},a="Restore Database",c={},l=[{value:"<strong>How to Use the <code>restore</code> Function</strong>",id:"how-to-use-the-restore-function",level:2},{value:"<strong>Restore From a Different Backup Directory</strong>",id:"restore-from-a-different-backup-directory",level:2},{value:"<strong>Custom Restore with a New Name</strong>",id:"custom-restore-with-a-new-name",level:3},{value:"<strong>How the Restore Function Works</strong>",id:"how-the-restore-function-works",level:2},{value:"<strong>Return Values</strong>",id:"return-values",level:2},{value:"<strong>Use Cases for Restoring a Database</strong>",id:"use-cases-for-restoring-a-database",level:2},{value:"<strong>Example: Auto-Restore If Integrity Fails</strong>",id:"example-auto-restore-if-integrity-fails",level:2},{value:"<strong>Important Notes</strong>",id:"important-notes",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"restore-database",children:"Restore Database"})}),"\n",(0,t.jsxs)(s.p,{children:["SwartzDB provides a ",(0,t.jsx)(s.code,{children:"restore"})," function that allows you to recover a previously backed-up database. This is essential in cases where the main database gets ",(0,t.jsx)(s.strong,{children:"corrupted, accidentally deleted, or modified incorrectly"}),"."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"how-to-use-the-restore-function",children:(0,t.jsxs)(s.strong,{children:["How to Use the ",(0,t.jsx)(s.code,{children:"restore"})," Function"]})}),"\n",(0,t.jsx)(s.p,{children:"To restore a database from a backup, use:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:'$sdb->restore("mydatabase.1701234567.bak");\n'})}),"\n",(0,t.jsx)(s.h2,{id:"restore-from-a-different-backup-directory",children:(0,t.jsx)(s.strong,{children:"Restore From a Different Backup Directory"})}),"\n",(0,t.jsxs)(s.p,{children:["The restore function by default searches the ",(0,t.jsx)(s.code,{children:"/backup/"})," directory. Change it to the directory where the backup is stored:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:'$sdb->restore("mydatabase.1701234567.bak",  "new_dir");\n'})}),"\n",(0,t.jsx)(s.h3,{id:"custom-restore-with-a-new-name",children:(0,t.jsx)(s.strong,{children:"Custom Restore with a New Name"})}),"\n",(0,t.jsxs)(s.p,{children:["If you want to restore the backup ",(0,t.jsx)(s.strong,{children:"to a different database name"}),", or if the backup does not contain the ",(0,t.jsx)(s.strong,{children:"orignal database name"}),", specify the third parameter:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:'$sdb->restore("new_name.bak", "backup", "mydatabase");\n'})}),"\n",(0,t.jsxs)(s.p,{children:["This will restore the backup file ",(0,t.jsx)(s.code,{children:"new_name.bak"})," into either an existing or a new database file named ",(0,t.jsx)(s.code,{children:"mydatabase.sdb"}),"."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"how-the-restore-function-works",children:(0,t.jsx)(s.strong,{children:"How the Restore Function Works"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Locate the Backup File"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["It looks for the backup file inside the default backup folder (",(0,t.jsx)(s.code,{children:"/backup/"}),")."]}),"\n",(0,t.jsxs)(s.li,{children:["If the file does not exist, the function returns ",(0,t.jsx)(s.code,{children:"false"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Determine the Original Database Name"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["If the third parameter (",(0,t.jsx)(s.code,{children:"$originalFile"}),") is ",(0,t.jsx)(s.strong,{children:"not provided"}),", the function extracts the original filename from the backup file."]}),"\n",(0,t.jsxs)(s.li,{children:["For example, if the backup file is ",(0,t.jsx)(s.strong,{children:'"users.1701234567.bak"'}),", it assumes ",(0,t.jsx)(s.code,{children:'"users"'})," as the database name."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Restore the Data"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Reads the backup file contents."}),"\n",(0,t.jsx)(s.li,{children:"Overwrites (or creates) the database file with the original or new name."}),"\n",(0,t.jsxs)(s.li,{children:["Returns ",(0,t.jsx)(s.code,{children:"true"})," on success."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"return-values",children:(0,t.jsx)(s.strong,{children:"Return Values"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"true"})})," \u2192 The database was successfully restored."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"false"})})," \u2192 The backup file does not exist or the restore failed."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"use-cases-for-restoring-a-database",children:(0,t.jsx)(s.strong,{children:"Use Cases for Restoring a Database"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"After Accidental Deletion"}),": If a database was ",(0,t.jsx)(s.strong,{children:"mistakenly deleted"}),", restoring it is a simple one-command process."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Undoing Corrupt Changes"}),": If a modification broke the database, restoring an earlier version ensures data integrity."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Data Migration"}),": If you need to create a copy of an old database under a different name."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"example-auto-restore-if-integrity-fails",children:(0,t.jsx)(s.strong,{children:"Example: Auto-Restore If Integrity Fails"})}),"\n",(0,t.jsxs)(s.p,{children:["You can combine the ",(0,t.jsx)(s.code,{children:"restore"})," function with the ",(0,t.jsx)(s.code,{children:"integrity"})," check to automatically recover a corrupted database:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-php",children:'if (!$sdb->integrity("mydatabase")) {\n    echo "Database corrupted! Restoring from backup...";\n    if ($sdb->restore("mydatabase.1701234567.bak")) {\n        echo "Restore successful!";\n    } else {\n        echo "Restore failed. Check backup files.";\n    }\n}\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"important-notes",children:(0,t.jsx)(s.strong,{children:"Important Notes"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Always ",(0,t.jsx)(s.strong,{children:"store backup files securely"})," to prevent accidental loss."]}),"\n",(0,t.jsxs)(s.li,{children:["Restoring will ",(0,t.jsx)(s.strong,{children:"overwrite"})," the existing database if the original name is used."]}),"\n",(0,t.jsxs)(s.li,{children:["Ensure that SwartzDB has the correct ",(0,t.jsx)(s.strong,{children:"write permissions"})," to modify files."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Using the ",(0,t.jsx)(s.code,{children:"restore"})," function, you can efficiently recover lost or corrupted databases, ensuring data safety in your SwartzDB-based applications."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>a});var n=r(6540);const t={},o=n.createContext(t);function i(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);